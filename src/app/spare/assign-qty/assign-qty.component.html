<div class="edit-modal" *ngIf="model_type=='Assign Stock'">
  <p class="heading">ASSIGN QTY HISTORY</p>
  <div class="card-body">
    <div class="grid-box">
      <div class="block-feilds">
        <span>Part Name</span>
        <p>{{data.part_name | titlecase}}</p>
      </div>
      <div class="block-feilds">
        <span>Part Number</span>
        <p>{{data.part_no | titlecase}}</p>
      </div>
    </div>
  </div>
  <div mat-dialog-content *ngIf="qtyList.length > 0">
    <div class="cs-table left-right-10">
      <div class="table-head">
        <table>
          <tr>
            <th class="w30 text-center ">Sr.No</th>
            <th class="w100">Date Created</th>
            <th class="w100">Created By</th>
            <th class="w150">Technician Details</th>
            <th class="w30 text-center ">Qty</th>
          </tr>
        </table>
      </div>
      <div class="table-container pb0">
        <div class="table-content none-shadow">
          <table>
            <ng-container>
              <tr *ngFor="let row of qtyList; let i = index">
                <td class="w30 text-center ">{{i+1}}</td>
                <td class="w100">{{row.date_created ? (row.date_created | date : 'dd MMM yyy ,h:mm a') : '--'}}</td>
                <td class="w100">{{row.created_by_name | titlecase}}</td>
                <td class="w150">{{row.technician_name | titlecase}}-{{row.technician_mobile}}</td>
                <td class="w30 text-center ">{{row.assigned_qty}}</td>
              </tr>
            </ng-container>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div mat-dialog-actions>
    <button mat-stroked-button color="warn" [mat-dialog-close]="false">Cancel</button>
  </div>
</div>

<div class="edit-modal" *ngIf="model_type=='Incoming'">
  <p class="heading">INCOMING STOCK</p>
  <div class="card-body">
    <div class="grid-box">
      <div class="block-feilds">
        <span>Part Name</span>
        <p>{{data.part_name | titlecase}}</p>
      </div>
      <div class="block-feilds">
        <span>Part Number</span>
        <p>{{data.part_no | titlecase}}</p>
      </div>
    </div>
  </div>
  <p class="heading mt-10 border-top" *ngIf="spareIncomingList.length > 0">Spare Part List</p>
  <div mat-dialog-content *ngIf="spareIncomingList.length > 0">
    <div class="cs-table left-right-10">
      <div class=" border-top">
        <div class="table-head">
          <table>
            <tr>
              <th class="w30 text-center ">Sr.No</th>
              <th class="w110">Date</th>
              <th class="w100">Created By</th>
              <th class="w70">Type</th>
              <th class="w30 text-center ">Qty</th>
            </tr>
          </table>
        </div>
      </div>

      <div class="table-container pb0">
        <div class="table-content none-shadow">
          <table>
            <ng-container>
              <tr *ngFor="let row of spareIncomingList; let i = index">
                <td class="w30 text-center ">{{i+1}}</td>
                <td class="w110">{{row.date_created ? (row.date_created | date : 'dd MMM yyy ,h:mm a') : '--'}}</td>
                <td class="w100">{{row.created_by_name | titlecase}}</td>
                <td class="w70 ">{{row.type? (row.type | titlecase):'--'}}</td>
                <td class="w30 text-center ">{{row.qty? row.qty :'--'}}</td>
              </tr>
            </ng-container>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div mat-dialog-actions>
    <button mat-stroked-button color="warn" [mat-dialog-close]="false">Cancel</button>
  </div>
</div>

<div class="edit-modal" *ngIf="model_type=='Outgoing'">
  <p class="heading">OUTGOING STOCK</p>
  <div class="card-body">
    <div class="grid-box">
      <div class="block-feilds">
        <span>Part Name</span>
        <p>{{data.part_name | titlecase}}</p>
      </div>
      <div class="block-feilds">
        <span>Part Number</span>
        <p>{{data.part_no | titlecase}}</p>
      </div>
    </div>
  </div>
  <p class="heading mt-10 border-top" *ngIf="spareOutgoingList.length > 0">Spare Part List</p>
  <div mat-dialog-content *ngIf="spareOutgoingList.length > 0">
    <div class="cs-table left-right-10">
      <div class=" border-top">
        <div class="table-head">
          <table>
            <tr>
              <th class="w30 text-center ">Sr.No</th>
              <th class="w100">Date</th>
              <th class="w100">Created By</th>
              <th class="w150">Technician Details</th>
              <th class="w30 text-center ">Qty</th>
            </tr>
          </table>
        </div>
      </div>

      <div class="table-container pb0">
        <div class="table-content none-shadow">
          <table>
            <ng-container>
              <tr *ngFor="let row of spareOutgoingList; let i = index">
                <td class="w30 text-center ">{{i+1}}</td>
                <td class="w100">{{row.date_created ? (row.date_created | date : 'dd MMM yyy ,h:mm a') : '--'}}</td>
                <td class="w100">{{row.created_by_name | titlecase}}</td>
                <td class="w150 ">{{row.technician_name? (row.technician_name |
                  titlecase):'--'}}-{{row.technician_mobile}}</td>
                <td class="w30 text-center ">{{row.assigned_qty? row.assigned_qty :'--'}}</td>
              </tr>
            </ng-container>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div mat-dialog-actions>
    <button mat-stroked-button color="warn" [mat-dialog-close]="false">Cancel</button>
  </div>
</div>

<div class="edit-modal" *ngIf="model_type=='Return'">
  <p class="heading">Return STOCK</p>
  <div class="card-body">
    <div class="grid-box">
      <div class="block-feilds">
        <span>Part Name</span>
        <p>{{data.part_name | titlecase}}</p>
      </div>
      <div class="block-feilds">
        <span>Part Number</span>
        <p>{{data.part_no | titlecase}}</p>
      </div>
    </div>
  </div>
  <p class="heading mt-10 border-top" *ngIf="sparereturnList.length > 0">Spare Part List</p>
  <div mat-dialog-content *ngIf="sparereturnList.length > 0">
    <div class="cs-table left-right-10">
      <div class=" border-top">
        <div class="table-head">
          <table>
            <tr>
              <th class="w30 text-center ">Sr.No</th>
              <th class="w100">Date</th>
              <th class="w100">Created By</th>
              <th class="w150">Technician Details</th>
              <th class="w30 text-center ">Qty</th>
            </tr>
          </table>
        </div>
      </div>

      <div class="table-container pb0">
        <div class="table-content none-shadow">
          <table>
            <ng-container>
              <tr *ngFor="let row of sparereturnList; let i = index">
                <td class="w30 text-center ">{{i+1}}</td>
                <td class="w100">{{row.date_created ? (row.date_created | date : 'dd MMM yyy ,h:mm a') : '--'}}</td>
                <td class="w100">{{row.created_by_name | titlecase}}</td>
                <td class="w150 ">{{row.technician_name? (row.technician_name |
                  titlecase):'--'}}-{{row.technician_mobile}}</td>
                <td class="w30 text-center ">{{row.qty? row.qty :'--'}}</td>
              </tr>
            </ng-container>
          </table>
        </div>
      </div>
    </div>
  </div>
  <div mat-dialog-actions>
    <button mat-stroked-button color="warn" [mat-dialog-close]="false">Cancel</button>
  </div>
</div>

<div class="edit-modal" *ngIf="model_type=='assign_stock'">
  <div mat-dialog-content>
    <p class="heading">Assign Stock</p>
    <div class="cs-form">
      <div class="row">
        <div class="col s6">
          <mat-form-field appearance="outline">
            <mat-label>Assign Technician</mat-label>
            <mat-select name="id" [(ngModel)]="technicianData.id" #id="ngModel"
              (selectionChange)="getCarpenterInfo(technicianData.id)" required>
              <mat-option>
                <ngx-mat-select-search noEntriesFoundLabel="'no data found'" placeholderLabel="Search.."
                  (keyup)="assign_engineerget($event.target.value)"></ngx-mat-select-search>
              </mat-option>
              <mat-option *ngFor="let row of engineerList" [value]="row.id">{{row.name |
                titlecase}}-{{row.mobile_no}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div mat-dialog-content *ngIf="technicianData.id">
        <p class="heading border-top">Part Information</p>
        <div class="cs-form">
          <div class="row">

            <div class="col s6">
              <mat-form-field appearance="outline" [ngClass]="{'has-error' : id.invalid } ">
                <mat-label>Select Part</mat-label>
                <mat-select name="id" #id="ngModel" [(ngModel)]="formData.id"
                  (selectionChange)="get_spare_detail(formData.id)">
                  <mat-option>
                    <ngx-mat-select-search noEntriesFoundLabel="'no data found'" placeholderLabel="Search.."
                      (keyup)="getSparePartList($event.target.value)"></ngx-mat-select-search>
                  </mat-option>
                  <mat-option *ngFor="let row of spareList" value="{{row.id}}" color="accent">{{row.part_name |
                    titlecase}}-{{row.part_no | titlecase}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col s6">
              <mat-form-field appearance="outline" [ngClass]="{'has-error' : part_no?.invalid } ">
                <mat-label>Part No.</mat-label>
                <input matInput placeholder="Type Here ..." name="part_no" #part_no="ngModel"
                  [(ngModel)]="formData.part_no" readonly />
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <div class="col s6">
              <mat-form-field appearance="outline" [ngClass]="{'has-error' : current_stock?.invalid } ">
                <mat-label>Current Stock </mat-label>
                <input matInput placeholder="Type Here ..." name="current_stock" #current_stock="ngModel"
                  [(ngModel)]="formData.current_stock" onkeypress="return event.charCode>=48 && event.charCode<=57"
                  readonly>
              </mat-form-field>
            </div>
            <div class="col s6">
              <mat-form-field appearance="outline" [ngClass]="{'has-error' : qty?.invalid } ">
                <mat-label>Stock Qty</mat-label>
                <input matInput placeholder="Type Here ..." name="qty" #qty="ngModel" [(ngModel)]="formData.qty"
                  onkeypress="return event.charCode>=48 && event.charCode<=57" (input)="max()">
              </mat-form-field>
            </div>
            <div class="text-right">
              <button style="margin: 7px;" mat-raised-button color="accent" type="text" [disabled]="!formData.qty"
                (click)="addSpare()">Add To List</button>
            </div>
          </div>
          <div class="row" *ngIf="add_list.length > 0 ">
            <div class="col s12 m12 l12">
              <div class="card">
                <div class="card-head">
                  <h2> Spare Part List</h2>
                </div>
                <div class="card-body">
                  <div class="cs-table left-right-10">
                    <div class=" border-top">
                      <div class="table-head">
                        <table>
                          <tr>
                            <th class="w30 text-center">Sr.No</th>
                            <th class="w100 ">Part Name</th>
                            <th class="w100 ">Part No.</th>
                            <th class="w30 text-center">Qty</th>
                            <th class="w30 text-center">Action</th>
                          </tr>
                        </table>
                      </div>
                    </div>

                    <div class="table-container pb0">
                      <div class="table-content none-shadow">
                        <table>
                          <tr *ngFor="let row of add_list;let i=index;">
                            <td class="w30 text-center">{{i+1}}</td>
                            <td class="w100">{{row.part_name |titlecase}}</td>
                            <td class="w100">{{row.part_no |titlecase}}</td>
                            <td class="w30 text-center">{{row.qty}}</td>
                            <td class="w30 text-center">
                              <div class="action-button">
                                <button mat-icon-button matTooltip="Delete" (click)="delete(i)">
                                  <i class="material-icons del">delete</i>
                                </button>
                              </div>
                            </td>
                          </tr>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div mat-dialog-actions>
    <div class="text-right wp100">
      <button class="mr10" mat-stroked-button color="warn" [mat-dialog-close]="false">Cancel</button>
      <button mat-raised-button color="accent" type="submit" [ngClass]="{'loading': savingFlag == true}"
        [disabled]="savingFlag == true || add_list.length==0" (click)="assignStock()">
        {{savingFlag == true ? 'Saving' : 'Save'}}
      </button>
    </div>
  </div>

</div>
<div class="edit-modal" *ngIf="model_type=='Manage Stock'">
  <div mat-dialog-content>
    <p class="heading">MANAGE STOCK</p>
    <div class="cs-form">
      <div class="row">
        <div class="col s12">
          <mat-form-field appearance="outline" [ngClass]="{'has-error' : id.invalid } ">
            <mat-label>Select Part</mat-label>
            <mat-select name="id" #id="ngModel" [(ngModel)]="spare_data.id"
              (selectionChange)="get_spare_detail2(spare_data.id)">
              <mat-option>
                <ngx-mat-select-search noEntriesFoundLabel="'no data found'" placeholderLabel="Search.."
                  (keyup)="getSparePartList($event.target.value)"></ngx-mat-select-search>
              </mat-option>
              <mat-option *ngFor="let row of spareList" value="{{row.id}}" color="accent">{{row.part_name |
                titlecase}}-{{row.part_no | titlecase}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="row">

        <div class="col s6">
          <mat-form-field appearance="outline" [ngClass]="{'has-error' : part_no?.invalid } ">
            <mat-label>Part No.</mat-label>
            <input matInput placeholder="Type Here ..." name="part_no" #part_no="ngModel"
              [(ngModel)]="spare_data.part_no" readonly />
          </mat-form-field>
        </div>
        <div class="col s6">
          <mat-form-field appearance="outline" [ngClass]="{'has-error' : qty?.invalid } ">
            <mat-label>Stock Qty</mat-label>
            <input matInput placeholder="Type Here ..." name="qty" #qty="ngModel" [(ngModel)]="spare_data.qty"
              onkeypress="return event.charCode>=48 && event.charCode<=57">
          </mat-form-field>
        </div>
        <div class="text-right">
          <button style="margin: 7px;" mat-raised-button color="accent" type="text" [disabled]="!spare_data.qty"
            (click)="addSpare2()">Add To List</button>
        </div>
      </div>
      <div class="row" *ngIf="add_list2.length > 0 ">
        <div class="col s12 m12 l12">
          <div class="card">
            <div class="card-head">
              <h2> Spare Part List</h2>
            </div>
            <div class="card-body">
              <div class="cs-table left-right-10">
                <div class=" border-top">
                  <div class="table-head">
                    <table>
                      <tr>
                        <th class="w30 text-center">Sr.No</th>
                        <th class="w100 ">Part Name</th>
                        <th class="w100 ">Part No.</th>
                        <th class="w30 text-center">Qty</th>
                        <th class="w30 text-center">Action</th>
                      </tr>
                    </table>
                  </div>
                </div>

                <div class="table-container pb0">
                  <div class="table-content none-shadow">
                    <table>
                      <tr *ngFor="let row of add_list2;let i=index;">
                        <td class="w30 text-center">{{i+1}}</td>
                        <td class="w100">{{row.part_name |titlecase}}</td>
                        <td class="w100">{{row.part_no |titlecase}}</td>
                        <td class="w30 text-center">{{row.qty}}</td>
                        <td class="w30 text-center">
                          <div class="action-button">
                            <button mat-icon-button matTooltip="Delete" (click)="delete2(i)">
                              <i class="material-icons del">delete</i>
                            </button>
                          </div>
                        </td>
                      </tr>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div mat-dialog-actions>
    <div class="text-right wp100">
      <button class="mr10" mat-stroked-button color="warn" [mat-dialog-close]="false">Cancel</button>
      <button mat-raised-button color="accent" type="submit" [ngClass]="{'loading': savingFlag == true}"
        [disabled]="savingFlag == true || add_list2.length==0 " (click)="manageStock()">
        {{savingFlag == true ? 'Saving' : 'Save'}}
      </button>
    </div>
  </div>
</div>

<div class="edit-modal" *ngIf="model_type=='Return Stock'">
  <form #update_basic="ngForm" (ngSubmit)="update_basic.valid && submitReturn()">
    <div mat-dialog-content>
      <p class="heading">Return Stock</p>
      <div class="cs-form">
        <div class="row">
          <div class="col s6">
            <mat-form-field appearance="outline">
              <mat-label>Assign Technician</mat-label>
              <mat-select name="id" [(ngModel)]="returnData.id" #id="ngModel"
                (selectionChange)="getCarpenter(returnData.id)" required>
                <mat-option>
                  <ngx-mat-select-search noEntriesFoundLabel="'no data found'" placeholderLabel="Search.."
                    (keyup)="assign_engineer($event.target.value)"></ngx-mat-select-search>
                </mat-option>
                <mat-option *ngFor="let row of engineer_list" [value]="row.id">{{row.name |
                  titlecase}}-{{row.mobile_no}}-({{row.district | titlecase}},{{row.state | titlecase}})</mat-option>
              </mat-select>
            </mat-form-field>
            <div class="alert alert-danger" *ngIf="id.touched">
              <p *ngIf="id.errors?.required">This field is required</p>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="returnData.id">
          <div class="col s12">
            <div class="edit-modal border-top">
              <p class="heading mt-10">All Ready Part Assign</p>
              <div mat-dialog-content>
                <div class="cs-table left-right-10">
                  <div class="table-head">
                    <table>
                      <tr>
                        <th class="w30 text-center">Sr.No</th>
                        <th class="w100">Part Name</th>
                        <th class="w80 text-center">Part No</th>
                        <th class="w50 text-center">Assign Qty</th>
                        <th class="w100 text-center ">Return Qty</th>
                      </tr>
                    </table>
                  </div>
                  <div class="table-container pb0">
                    <div class="table-content none-shadow">
                      <table>
                        <ng-container>
                          <tr *ngFor="let row of add_list3; let i = index">
                            <td class="w30 text-center">{{ i + 1 }}</td>
                            <td class="w100">{{ row.part_name |titlecase }}</td>
                            <td class="w80 text-center">{{ row.part_no |titlecase }}</td>
                            <td class="w50 text-center">{{row.assigned_qty}}</td>
                            <td class="w100 text-center ">
                              <mat-form-field appearance="outline" [ngClass]="{'has-error' : qty?.invalid } ">
                                <mat-label>Stock Qty</mat-label>
                                <input matInput placeholder="Type Here ..." name="qty{{i}}" #qty="ngModel"
                                  [(ngModel)]="row.qty" (ngModelChange)="maxReturn(row.qty,i,row.assigned_qty)"
                                  onkeypress="return event.charCode>=48 && event.charCode<=57">
                              </mat-form-field>
                            </td>
                          </tr>
                        </ng-container>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div mat-dialog-actions>
      <div class="text-right wp100">
        <button class="mr10" mat-stroked-button color="warn" [mat-dialog-close]="false">Cancel</button>
        <button mat-raised-button color="accent" type="submit" [ngClass]="{'loading': savingFlag == true}"
          [disabled]="savingFlag == true || showSavebtn==true">
          {{savingFlag == true ? 'Saving' : 'Save'}}
        </button>
      </div>
    </div>
  </form>

</div>